@model IEnumerable<Info360.Models.Ingrediente>

@using System.Linq
@{
    ViewData["Title"] = "Heladera Virtual";
}

<div class="heladera-container">

    <h2 class="titulo">Heladera Virtual</h2>
    <p class="sub">Organiz√° lo que ten√©s en casa y tach√° cuando ya no est√° m√°s</p>

    <div class="categorias">
        <span class="cat active" data-cat="Almacen">Almac√©n</span>
        <span class="cat" data-cat="Heladera">Heladera</span>
        <span class="cat" data-cat="Freezer">Freezer</span>
        <span class="cat" data-cat="Otros">Otros</span>
    </div>

    <div class="items-list">
            @foreach (Ingrediente ingrediente in ViewBag.Heladera)
            {
                <div class="item" data-id="@ingrediente.id">
                    <span class="item-text">@ingrediente.medida</span>
                    <span class="precio">$@ingrediente.precio</span>
                    <form method="post" asp-action="EliminarHeladera" asp-controller="Home" class="del-form">
                        <input type="hidden" name="idIngrediente" value="@ingrediente.id" />
                        <button type="submit" class="del-btn">üóëÔ∏è</button>
                    </form>
                </div>
            }
    </div>

    <form method="post" asp-action="AgregarHeladera" asp-controller="Home" class="add-box">
        <label for="selectIngrediente" style="display:none">Elige ingrediente</label>
        <select id="selectIngrediente" name="idIngredienteExistente" class="input-add">
            <option value="">-- Elegir ingrediente existente --</option>
            @foreach(Ingrediente ing in ViewBag.ingredientes) {
                <option value="@ing.id">@ing.medida (@String.Format("${0:0.##}", ing.precio))</option>
            }
            <option value="0">+ Agregar nuevo ingrediente...</option>
        </select>

        <div id="newIngredientFields" style="display:none; width:100%;">
            <input name="medida" type="text" placeholder="Nombre / medida (ej: 1 kg arroz)" class="input-add" />
            <input name="precio" type="number" step="0.01" placeholder="Precio" class="input-add input-price" />
        </div>

        <button type="submit" class="btn-add">+</button>
    </form>

    <script>
        (function(){
            const sel = document.getElementById('selectIngrediente');
            const newFld = document.getElementById('newIngredientFields');
            sel.addEventListener('change', function(){
                if (sel.value === '0') {
                    newFld.style.display = 'block';
                } else {
                    newFld.style.display = 'none';
                }
            });
        })();
    </script>
</div>



